# MT7622 Linksys E8450/Belkin RT3200

### UBI Force Recovery Mode

Use this section when you have another UBI image on the hardware and you need to get it to accept our image
by bruteforce.

ref: https://github.com/dangowrt/owrt-ubi-installer

SSH into the host:

```
ssh -o StrictHostKeyChecking=no root@192.168.1.1 "echo c > /proc/sysrq-trigger"
```
> This will immediately force a reboot

Copy over the UBI image youd like to flash

```
scp -o StrictHostKeyChecking=no -O openwrt-mediatek-mt7622-linksys_e8450-ubi-squashfs-sysupgrade.itb root@192.168.1.1:/tmp/
```

ssh back into the host and force the upgrade:

```
ssh -o StrictHostKeyChecking=no root@192.168.1.1 "sysupgrade -n -v /tmp/openwrt-mediatek-mt7622-linksys_e8450-ubi-squashfs-sysupgrade.itb"
```
> This will immediately close all connection

You will see the following error after running `sysupgrade`, ignore it:

```
Mon Oct 23 09:11:32 UTC 2023 upgrade: Commencing upgrade. Closing all shell sessions.
Command failed: Connection failed
root@OpenWrt:/tmp# Connection to 192.168.1.1 closed by remote host.
Connection to 192.168.1.1 closed.
```

The hardware will still be running the old version of the firmware, you'll need to clear `PSTORE`:

```
ssh -o StrictHostKeyChecking=no root@192.168.1.1 "rm /sys/fs/pstore/* && reboot"
```

It will come up with the vlan for mgmt. Make sure you have an interface configured and firewall disabled for the local DHCP server.
Some have required a hard power reset if it doesnt come back after the initial reboot.
